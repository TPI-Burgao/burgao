<div class="menu-container">
  <app-header></app-header>
      <button class="icon-btn cart-btn" aria-label="Carrinho" (click)="toggleCart()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 2h6M6 6h12l1 12H5L6 6z"></path>
        </svg>
        @if (cartService.itemCount() > 0) {
          <span class="cart-badge">{{ cartService.itemCount() }}</span>
        }
      </button>
  <div class="menu-title">
    <h1>Menu</h1>
  </div>

  <div class="menu-grid">
    @for (item of menuItems; track item.title) {
      <div 
        class="menu-card"
        (click)="onMenuItemClick(item)"
      >
        <div class="card-image">
          <img [src]="item.image" [alt]="item.title">
          @if (item.isNew) {
            <span class="new-badge">Novo</span>
          }
        </div>
        <h3 class="card-title">{{ item.title }}</h3>
      </div>
    }
  </div>

  @if (selectedCategory) {
    <div class="modal-overlay" (click)="closeProducts()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h2>{{ selectedCategory.title }}</h2>
          <button class="close-btn" (click)="closeProducts()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>

        <div class="products-grid">
          @for (product of selectedCategory.products; track product.id) {
            <div class="product-card">
              <div class="product-image">
                <img [src]="product.image" [alt]="product.name">
              </div>
              <div class="product-info">
                <h3 class="product-name">{{ product.name }}</h3>
                <p class="product-description">{{ product.description }}</p>
                <div class="product-footer">
                  <span class="product-price">R$ {{ product.price.toFixed(2) }}</span>
                  <button class="add-to-cart-btn" (click)="addToCart(product)">
                    Adicionar
                  </button>
                </div>
              </div>
            </div>
          }
        </div>
      </div>
    </div>
  }

  <app-cart [isOpen]="isCartOpen" (close)="closeCart()"></app-cart>
</div>
